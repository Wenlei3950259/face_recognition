# 📚 文档索引

## 核心文档

### 📖 README.md
**项目总览和快速开始指南**
- 项目简介和特性
- Windows 和 Ubuntu 快速开始
- API 接口说明
- 项目结构
- 常用命令

### 📦 依赖说明.md
**完整的依赖说明文档**
- 依赖分类和说明
- 安装方式（完整安装 vs 增量安装）
- 依赖大小和安装时间
- 常见问题解答
- 版本兼容性

### 📝 异步改造说明.md
**技术改造详细说明**
- 改造概述
- 核心模块异步化
- 接口兼容性说明
- 性能优化
- 部署指南

### 📊 项目改造总结.md
**改造总结和优化建议**
- 改造完成情况
- 接口兼容性保证
- 性能提升数据
- 技术架构改进
- 后续优化建议

---

## Windows 文档

### 🪟 部署启动指南_win.md
**Windows 系统完整部署文档**
- 环境要求
- 快速开始（批处理脚本 / 手动启动）
- 服务管理（启动/停止/查看进程）
- 配置说明
- 模型文件管理
- 日志管理
- 常见问题
- 性能优化
- 防火墙配置
- 外网访问
- 生产部署建议

### 📜 start_server_win.bat
**Windows 启动脚本**
- 自动检查 Python 环境
- 自动安装依赖
- 一键启动服务

---

## Ubuntu 文档

### 🐧 部署启动指南_ubuntu.md
**Ubuntu 系统完整部署文档**
- 环境要求
- 快速开始（脚本 / 手动 / 后台运行）
- 服务管理（启动/停止/重启/状态）
- 配置说明
- 模型文件管理
- 日志管理
- 常见问题
- 性能优化
- 防火墙配置
- 使用 systemd 管理服务
- 使用 Nginx 反向代理

### 📜 Ubuntu 脚本文件

#### quick_start_ubuntu.sh
**快速启动脚本**
- 自动激活 conda 环境
- 自动检查并安装依赖
- 一键启动服务

#### deploy_ubuntu.sh
**自动部署脚本**
- 完整的环境检查
- 依赖安装
- 模型文件检查
- 配置文件验证
- 交互式启动

#### start_server_ubuntu.sh
**标准启动脚本**
- 环境检查
- 依赖安装
- 服务启动

#### manage_service.sh
**服务管理脚本**
- `start` - 启动服务
- `stop` - 停止服务
- `restart` - 重启服务
- `status` - 查看状态

#### face-api.service
**systemd 服务文件**
- 用于将服务注册为系统服务
- 支持开机自启
- 自动重启

---

## 通用文件

### 🐍 Python 脚本

#### start_server.py
**主启动脚本（Windows 和 Ubuntu 通用）**
- 支持前台运行
- 支持 `-d` 参数后台运行（需要 python-daemon）
- 读取配置文件
- 启动 uvicorn 服务器

#### start_daemon.py
**后台启动脚本（Ubuntu）**
- 自动检测端口占用
- 自动转入后台运行
- 显示管理命令
- 无需额外依赖

#### stop_server.py
**停止服务脚本（Ubuntu）**
- 查找占用端口的进程
- 交互式停止确认
- 显示进程信息

#### test_async_api.py
**API 测试脚本（通用）**
- 健康检查测试
- 特征提取测试（base64 和文件格式）
- 相似度计算测试
- 并发请求测试

### 📋 配置文件

#### requirements.txt
**Python 依赖包列表**
- FastAPI 及相关依赖
- InsightFace 及相关依赖
- 其他工具包

#### config/config.yaml
**主配置文件**
- 服务器配置（host, port, workers）
- 模型配置（det_size, threshold, providers）
- 日志配置（level, file, max_bytes）

#### models说明.txt
**模型文件说明**
- 模型位置
- 模型文件列表
- 下载说明

---

## 文档使用指南

### 🚀 新手入门
1. 阅读 **README.md** 了解项目概况
2. 根据系统选择：
   - Windows: 阅读 **部署启动指南_win.md**
   - Ubuntu: 阅读 **部署启动指南_ubuntu.md**
3. 使用对应的启动脚本快速开始

### 🔧 开发人员
1. 阅读 **异步改造说明.md** 了解技术细节
2. 阅读 **项目改造总结.md** 了解架构设计
3. 参考 **test_async_api.py** 编写测试

### 🏭 运维人员
1. 阅读对应系统的部署文档
2. 使用服务管理脚本管理服务
3. 配置 systemd 或 Windows 服务实现开机自启

### 🐛 故障排查
1. 查看对应系统部署文档的"常见问题"章节
2. 检查日志文件 `log/face_recognition.log`
3. 使用测试脚本验证服务状态

---

## 快速查找

### 我想...

#### 启动服务
- **Windows**: 双击 `start_server_win.bat` 或查看 [部署启动指南_win.md](部署启动指南_win.md)
- **Ubuntu**: 运行 `bash quick_start_ubuntu.sh` 或查看 [部署启动指南_ubuntu.md](部署启动指南_ubuntu.md)

#### 停止服务
- **Windows**: 按 Ctrl+C 或查看 [部署启动指南_win.md](部署启动指南_win.md#服务管理)
- **Ubuntu**: 运行 `python stop_server.py` 或查看 [部署启动指南_ubuntu.md](部署启动指南_ubuntu.md#服务管理)

#### 查看日志
- 查看 `log/face_recognition.log`
- 或参考对应系统的部署文档

#### 测试接口
- 运行 `python test_async_api.py`
- 或访问 http://localhost:5000/docs

#### 配置服务
- 编辑 `config/config.yaml`
- 参考 [README.md](README.md#配置说明)

#### 了解技术细节
- 阅读 [异步改造说明.md](异步改造说明.md)
- 阅读 [项目改造总结.md](项目改造总结.md)

#### 解决问题
- 查看对应系统部署文档的"常见问题"章节
- 检查日志文件
- 运行测试脚本

---

## 文档更新记录

### 2026-01-12
- ✅ 创建统一的 README.md
- ✅ 整理 Windows 和 Ubuntu 文档
- ✅ 删除重复和冗余文档
- ✅ 创建文档索引

### 2026-01-12（初始版本）
- 创建异步改造说明
- 创建项目改造总结
- 创建各系统部署文档

---

**📖 建议从 README.md 开始阅读！**
